require 'ecuacovid/utils/datos_reajustador'

describe Ecuacovid::Utils::DatosReajustador do
  it "Rellena en fracciones iguales" do
    # PCR ECUADOR
    #    23,    28,    37,   58,   111,   168,    260,   426,   532
    #   789,   981,  1082,  1211,  1403,  1627,  1835,  1924,  1966
    #  2302,  2758,  3163,  3368,  3465,  3646,  3747,  3995,  4450
    #  4965,  7161,  7257,  7466,  7529,  7603,  7858,  8225,  8450
    #  9022,  9468, 10128, 10398, 10850, 11183, 11183, 11183, 11183
    # 11183, 15728, 16145, 16404, 17806, 18863, 20937, 22981, 22981
    # 20483, 21361, 19881, 20134, 20622, 20572, 21481, 21549, 21565
    # 22530, 23786, 24245, 24626, 25195, 25898, 26350, 26872, 27302
    # 27800, 28399, 28700, 29147, 29515, 29615, 29887, 30142, 31038
    # 31458, 32010  32619, 33150

    original = [10850, 11183, 11183, 11183, 11183, 11183, 15728]
    datos    = [10850, 11183,     1,     1,     1,     1, 15728]
    esperado = [10850, 11183, 12092, 13001, 13910, 14819, 15728]
    expect(datos.reajustar).to eql(esperado)
 
    original = [18863, 20937, 22981, 22981, 20483, 21361, 19881, 20134, 20622, 20572]
    datos    = [18863, 19881,     1,     1,     1,     1,     1,     1,     1, 20572]
    esperado = [18863, 19881, 19967, 20053, 20139, 20225, 20311, 20397, 20483, 20572]
    expect(datos.reajustar).to eql(esperado)

    # PCR GUAYAS
    #     7,    11,    19,    37,    81,   128,   187,   318,   397
    #   607,   769,   826,   885,  1021,  1202,  1345,  1377,  1397
    #  1615,  1941,  2243,  2388,  2402,  2524,  2534,  2706,  3047
    #  3384,  5281,  5290,  5381,  5395,  5417,  5551,  5754,  5777
    #  6150,  6446,  6921,  7108,  7391,  7502,  7502,  7502,  7502
    #  7502, 10200, 10417, 10436, 11207, 11695, 13053, 14192, 14192
    # 12411, 12577, 11532, 11577, 11705, 11876, 11999, 12046, 12046
    # 12081, 12907, 13055, 13097, 13175, 13363, 13482, 13516, 13570
    # 13787, 13833, 13862, 13890, 13925, 13928, 14044, 14061, 14091
    # 14128, 14184, 14276, 14326

    original = [7391,  7502, 7502, 7502, 7502, 7502, 10200]
    datos    = [7391,  7502,    1,    1,    1,    1, 10200]
    esperado = [7391,  7502, 8041, 8580, 9119, 9658, 10200]
    expect(datos.reajustar).to eql(esperado)

    original = [11695, 13053, 14192, 14192, 12411, 12577, 11532, 11577, 11705, 11876]
    datos    = [11695, 11705,     1,     1,     1,     1,     1,     1,     1, 11876]
    esperado = [11695, 11705, 11726, 11747, 11768, 11789, 11810, 11831, 11852, 11876]
    expect(datos.reajustar).to eql(esperado)

    # PCR GUAYAQUIL
    #     2,     4,     9,    28,    61,    88,   114,   205,   251
    #   408,   526,   564,   611,   696,   837,   942,   963,   978
    #  1116,  1304,  1520,  1638,  1648,  1725,  1732,  1846,  2135
    #  2388,  3983,  3984,  4049,  4060,  4077,  4184,  4353,  4354
    #  4611,  4822,  5168,  5308,  5502,  5565,  5565,  5565,  5565
    #  5565,  7400,  7513,  7528,  8074,  8324,  9291,  9954,  9954
    #  8804,  8881,  8051,  8068,  8096,  8226,  8238,  8274,  8274
    #  8276,  8960,  9070,  9079,  9140,  9291,  9392,  9395,  9429
    #  9606,  9624,  9637,  9650,  9652,  9653,  9750,  9762,  9764
    #  9771,  9773,  9817,  9828

    
    original = [5502, 5565, 5565, 5565, 5565, 5565, 7400]
    datos    = [5502, 5565,    1,    1,    1,    1, 7400]
    esperado = [5502, 5565, 5932, 6299, 6666, 7033, 7400]
    expect(datos.reajustar).to eql(esperado)

    original = [8074,  8324,  9291,  9954,  9954,  8804,  8881,  8051,  8068,  8096, 8226]
    datos    = [8074,     1,     1,     1,     1,     1,     1,     1,     1,     1, 8226]
    esperado = [8074,  8089,  8104,  8119,  8134,  8149,  8164,  8179,  8194,  8209, 8226]
    expect(datos.reajustar).to eql(esperado)
  end
end